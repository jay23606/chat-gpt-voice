<!-- https://jay23606.github.io/chat-gpt-voice/html/redis2.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Redis Cloud Demo</title>
</head>
<body>
    <h1>Redis Cloud Demo</h1>

    <script>
        const apiKey = '<your-api-key>';
        const host = 'redis-12378.c239.us-east-1-2.ec2.cloud.redislabs.com';
        const port = 12378;

        // Helper function to send Redis commands via fetch
        const sendCommand = (command, ...args) => {
            const url = `https://${host}:${port}/`;

            const headers = new Headers();
            headers.append('Authorization', `Basic ${btoa(apiKey + ':' + apiKey)}`);
            headers.append('Content-Type', 'application/x-www-form-urlencoded');

            const body = new URLSearchParams({
                command,
                args: JSON.stringify(args)
            }).toString();

            return fetch(url, {
                method: 'POST',
                headers,
                body
            })
            .then(response => response.text())
            .then(responseText => {
                const parser = new RedisParser();
                parser.execute(responseText);
                return parser.getValue();
            });
        };

        // Set data in Redis database
        sendCommand('SET', 'key', 'value')
            .then(result => console.log(result))
            .catch(error => console.error(error));

        // Get data from Redis database
        sendCommand('GET', 'key')
            .then(result => console.log(result))
            .catch(error => console.error(error));
    </script>
</body>
</html>
