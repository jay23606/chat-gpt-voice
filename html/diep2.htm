<!-- https://jay23606.github.io/chat-gpt-voice/html/diep2.htm -->

<!DOCTYPE html>
<html>
  <body>
    <canvas id="myCanvas" width="400" height="400"></canvas>
    <script>
      const canvas = document.getElementById("myCanvas");
      const ctx = canvas.getContext("2d");

      let circleX = canvas.width / 2;
      let circleY = canvas.height / 2;
      let turretWidth = 10;
      let turretLength = 30;

      let rotationAngle = 0;

      const draw = () => {
        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw the circle
        ctx.beginPath();
        ctx.arc(circleX, circleY, 50, 0, Math.PI * 2);
        ctx.strokeStyle = "black";
        ctx.stroke();

        // Draw the rectangle at the end of the circle
        ctx.save();
        ctx.translate(circleX, circleY);
        ctx.rotate(rotationAngle);
        ctx.fillRect(55, -turretWidth / 2, turretLength, turretWidth);
        ctx.restore();
      };

      // Update the rotation angle based on the mouse location
      canvas.addEventListener("mousemove", (event) => {
        const rect = canvas.getBoundingClientRect();
        const mouseX = event.clientX - rect.left;
        const mouseY = event.clientY - rect.top;

        rotationAngle = Math.atan2(mouseY - circleY, mouseX - circleX);
      });

      // Handle keyboard input for movement
      document.addEventListener("keydown", (event) => {
        switch (event.key) {
          case "a":
            circleX -= 10;
            break;
          case "d":
            circleX += 10;
            break;
          case "w":
            circleY -= 10;
            break;
          case "s":
            circleY += 10;
            break;
        }
      });

      setInterval(draw, 10);
    </script>
  </body>
</html>
