<!-- https://jay23606.github.io/chat-gpt-voice/html/goal-calc.htm -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Income Calculator</title>
</head>
<body>
    <table>
      	<tr>
            <td>Balance (B):</td>
            <td><input type="text" id="balance" value="0" /></td>
        </tr>
        <tr>
            <td>Initial Number of Properties (P):</td>
            <td><input type="text" id="initialProperties" value="20" /></td>
        </tr>
        <tr>
            <td>Monthly Income (MI, initial):</td>
            <td><input type="text" id="initialIncome" value="10000" /></td>
        </tr>
        <tr>
            <td>Monthly Cash Flow per property (CF):</td>
            <td><input type="text" id="incomeIncrease" value="500" /></td>
        </tr>
        <tr>
            <td>Acquisition Cost for a Property (A):</td>
            <td><input type="text" id="acquisitionCost" value="30000" /></td>
        </tr>
        <tr>
            <td>Reserves (R):</td>
            <td><input type="text" id="reserves" value="10000" /></td>
        </tr>
        <tr>
            <td>Monthly Cashflow Goal:</td>
            <td><input type="text" id="monthlyGoal" value="100000" /></td>
        </tr>
      <tr>
            <td>Note Term (T, months):</td>
            <td><input type="text" id="noteTerm" value="300" /></td>
        </tr>
    </table>

    <button onclick="calculate()">Calculate</button>

    <div id="output"></div>

    <script>
        function calculate() {
            let N = 0;    // month
            let B = parseInt(document.getElementById("balance").value);
            let P = parseInt(document.getElementById("initialProperties").value);
            let MI = parseInt(document.getElementById("initialIncome").value);
            const CF = parseInt(document.getElementById("incomeIncrease").value);
            const A = parseInt(document.getElementById("acquisitionCost").value);
            const R = parseInt(document.getElementById("reserves").value);
            const CF_goal = parseInt(document.getElementById("monthlyGoal").value);
          	const T = parseInt(document.getElementById("noteTerm").value);

            let outputDiv = document.getElementById("output");
            outputDiv.innerHTML = '';  // Clear previous results
			
          	var acqArr = []
            while (MI < CF_goal) {
                N++;
                B += MI;
              	var p = P;
                while (B >= A + R) {
                    B -= A;
                    MI += CF; //increase monthly income by CF for each acquistion
                  	P++;
                }
              	acqArr.push(P-p);
              	
              	//lets assume they are paid off after 30 years
              	
              	if(N>=T){
                  	var buyerPaidOff = acqArr[N-T];
                  	if(buyerPaidOff>0){
                      outputDiv.innerHTML += ` Month (before): ${N}, MI: ${MI}, B: ${B}, P: ${P}, P-p: ${P-p} <br/>`;
                      MI -= CF*buyerPaidOff;
                      P -= buyerPaidOff;
                      outputDiv.innerHTML += ` MI reduced by ${CF*buyerPaidOff} due to payoff of ${buyerPaidOff} properties<br/>`;
                    }
                }
                outputDiv.innerHTML += `Month: ${N}, MI: ${MI}, B: ${B}, P: ${P}, P1-P0: ${P-p} <br/>`;
            }

            outputDiv.innerHTML += `Number of months to exceed $${CF_goal} in monthly income: ${N} (${N / 12} years) <br/>`;
        }
    </script>
</body>
</html>